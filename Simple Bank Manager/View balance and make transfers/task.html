<div class="step-text">
<h5 id="description">Description</h5>
<p>Let's implement some of the main features of the Bank application. In this stage, you'll implement viewing account balances and making transfers. After a successful login, users should be able to go to the <em>Transfer funds</em> screen, transfer money to the account, and check the current balance at the <em>View Balance</em> screen.</p>
<h5 id="objectives">Objectives</h5>
<ol>
<li>Tests may pass the user balance as a <code class="java">Double</code> to <code class="java">MainActivity</code> through <code class="java">intent.extras</code>. Retrieve that balance, using the <code class="java">balance</code> key. In case no balance is passed, use <code class="java">100.0</code> as the default value for balance;</li>
<li>Add a fragment named <code class="java">ViewBalanceFragment</code> to the navigation graph:
    <ul>
<li>Add a <code class="java">TextView</code> to <code class="java">ViewBalanceFragment</code> with the id of <code class="java">viewBalanceLabelTextView</code>, the text should be <code class="java">Balance:</code></li>
<li>Add a <code class="java">TextView</code> to <code class="java">ViewBalanceFragment</code> with the id of <code class="java">viewBalanceAmountTextView</code>. This view will be used to show the account balance;</li>
<li>On the design tab of <code class="java">nav_graph</code>, make a connection from <code class="java">UserMenuFragment</code> to <code class="java">ViewBalanceFragment</code>. The generated code should contain the action with the ID of <code class="java">action_userMenuFragment_to_viewBalanceFragment</code> and the destination <code class="java">viewBalanceFragment</code>;</li>
<li>After clicking on <code class="java">userMenuViewBalanceButton</code>, display <code class="java">ViewBalanceFragment</code>. On the <code class="java">viewBalanceAmountTextView</code>, display the current text with the current balance state. Display the current balance with two decimal places and a <code class="java">$</code> at the start: <code class="java">$100.00</code>;</li>
<li>When a user is at <code class="java">ViewBalanceFragment</code>, a click on the <code class="java">back</code> button should redirect users to <code class="java">UserMenuFragment</code>;</li>
</ul>
</li>
<li>Add a Fragment named <code class="java">TransferFundsFragment</code> to the navigation graph:
    <ul>
<li>On <code class="java">nav_graph</code>, make a connection from <code class="java">UserMenuFragment</code> to <code class="java">TransferFundsFragment</code>. The generated code should have the action with the id of <code class="java">action_userMenuFragment_to_transferFundsFragment</code> and the destination ID of <code class="java">transferFundsFragment</code></li>
<li>Add an <code class="java">EditText</code> to <code class="java">TransferFundsFragment</code> with the ID of <code class="java">transferFundsAccountEditText</code>, a hint <code class="java">Account number</code> and input type of <code class="java">text</code>. This view will be used to input the account to transfer funds;</li>
<li>Add an <code class="java">EditText</code> to <code class="java">TransferFundsFragment</code> with the ID of <code class="java">transferFundsAmountEditText</code>, a hint <code class="java">Enter amount</code> and input type of <code class="java">numberDecimal</code>. This view will be used to input the funds to transfer;</li>
<li>Add a <code class="java">Button</code> to <code class="java">TransferFundsFragment</code> with the ID of <code class="java">transferFundsButton</code>. If clicked, first validate the input:
        <ul>
<li>Consider accounts valid only if they start with either <code class="java">sa</code> or <code class="java">ca</code> followed by four digits. <code class="java">sa</code> stands for a savings account, and <code class="java">ca</code> is for a checking account;</li>
<li>If the account input is not valid, set the <code class="java">error</code> property of <code class="java">transferFundsAccountEditText</code> to <code class="java">"Invalid account number"</code>;</li>
<li>A valid amount is a number greater than zero;</li>
<li>If the amount is not valid, set the <code class="java">error</code> property of <code class="java">transferFundsAmountEditText</code> to <code class="java">"Invalid amount"</code>;</li>
<li>If both inputs are not valid, set the <code class="java">error</code> property for both <code class="java">EditTexts</code>.</li>
</ul>
        If both inputs are valid, try to carry out the transfer:

        <ul>
<li>If the amount on <code class="java">transferFundsAmountEditText</code> is greater than the current balance, show the toast message <code class="java">Not enough funds to transfer &lt;amount&gt;$</code> where <code class="java">amount</code> is the amount on <code class="java">transferFundsAmountEditText</code> with two decimals. Keep the current balance state and remain on <code class="java">TransferFundsFragment</code>;</li>
<li>If the amount on <code class="java">transferFundsAmountEditText</code> is less or equal to the current balance, show the toast message <code class="java">Transferred &lt;amount&gt;$ to account &lt;account&gt;</code> where <code class="java">amount</code> is the amount on <code class="java">transferFundsAmountEditText</code> with two decimals, and <code class="java">account</code> is the account on <code class="java">transferFundsAccountEditText</code>. Debt the current balance with the given amount and automatically go back to <code class="java">UserMenuFragment</code>;</li>
<li>To simplify, there is no need to credit any account. An actual application would have a backend managing account state and the app would just make network requests with transfer data without the need to manage the state itself, so this simplification makes sense</li>
</ul>
</li>
<li>While at <code class="java">TransferFundsFragment</code>, a click on the <code class="java">back</code> button should redirect users to <code class="java">UserMenuFragment</code>.</li>
</ul>
</li>
</ol>
<h5 id="example">Example<br/>
<picture><img alt="Implemented features" height="750" name="simpleBankManager_stage3a.gif" src="https://ucarecdn.com/f3dbeff7-e323-446c-b7c8-303aab876236/" width="340"/></picture><br/>
<br/>
<br/>
<picture><img alt="Successful transfer" height="750" name="simpleBankManager_stage3b.gif" src="https://ucarecdn.com/e09b0ed1-2b3c-48c7-9279-eb9e0ee0f7fb/" width="340"/></picture><br/>
<br/>
<br/>
<picture><img alt="Transfer errors" height="750" name="simpleBankManager_stage3c.gif" src="https://ucarecdn.com/5c67c6e3-e232-488e-a34e-8888ef5d9831/" width="340"/></picture></h5>
</div>